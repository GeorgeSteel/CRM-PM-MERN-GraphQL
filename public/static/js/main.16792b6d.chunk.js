(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,a){e.exports=a(431)},227:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},431:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(42),o=a.n(l),c=(a(227),a(14)),s=a(45),i=a(4),m=Object(s.g)(function(e){var t=e.history;return r.a.createElement(i.a,null,function(e){return r.a.createElement("button",{className:"btn btn-light ml-md-2 mt-2 mt-md-0 ml-2",onClick:function(){return function(e,t){sessionStorage.removeItem("token",""),e.resetStore(),t.push("/login")}(e,t)}},"Cerrar Sesi\xf3n")})}),u=function(e){return"ADMINISTRADOR"!==e.session.rol?null:r.a.createElement("li",{className:"nav-item dropdown ml-4"},r.a.createElement("button",{className:"nav-link dropdown-toggle btn btn-block btn-warning","data-toggle":"dropdown"},"Usuarios"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navegacion"},r.a.createElement(c.b,{to:"/usuarios",className:"dropdown-item"},"Ver Usuarios"),r.a.createElement(c.b,{to:"/registro",className:"dropdown-item"},"Crear Usuario")))},d=function(){return r.a.createElement("h3",{className:"navbar-brand text-light font-weight-bold"},"DCM Aguascalientes")},p=function(e){var t=e.session;return r.a.createElement(n.Fragment,null,r.a.createElement(c.b,{to:"/panel",className:"navbar-brand text-light font-weight-bold"},"DCM Aguascalientes"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navegacion","aria-controls":"navegacion","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navegacion"},r.a.createElement("ul",{className:"navbar-nav ml-auto text-right"},r.a.createElement("li",{className:"nav-item dropdown mr-md-2 my-2 my-sm-2 my-md-0"},r.a.createElement("button",{className:"nav-link dropdown-toggle btn btn-block btn-success","data-toggle":"dropdown"},"Clientes"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navegacion"},r.a.createElement(c.b,{to:"/clientes",className:"dropdown-item"},"Ver Clientes"),r.a.createElement(c.b,{to:"/cliente/nuevo",className:"dropdown-item"},"Nuevo Cliente"))),r.a.createElement("li",{className:"nav-item dropdown mr-md-2 my-2 my-sm-2 my-md-0"},r.a.createElement("button",{className:"nav-link dropdown-toggle btn btn-block btn-success","data-toggle":"dropdown"},"Proveedores"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navegacion"},r.a.createElement(c.b,{to:"/proveedores",className:"dropdown-item"},"Ver Proveedores"),r.a.createElement(c.b,{to:"/proveedor/nuevo",className:"dropdown-item"},"Nuevo Proveedor"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("button",{className:"nav-link dropdown-toggle btn btn-block btn-success","data-toggle":"dropdown"},"Productos"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navegacion"},r.a.createElement(c.b,{to:"/productos",className:"dropdown-item"},"Ver Productos"),r.a.createElement(c.b,{to:"/producto/nuevo",className:"dropdown-item"},"Nuevo Producto"))),r.a.createElement(u,{session:t}),r.a.createElement(m,null))))},f=function(e){var t=e.session.getUser,a=e.expired,n=t&&!a?r.a.createElement(p,{session:t}):r.a.createElement(d,null);return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary justify-content-between d-flex mb-4"},r.a.createElement("div",{className:"container"},n))},g=a(6),E=a(7),b=a(9),h=a(8),v=a(10),N=a(16),y=a(13),j=a.n(y);function O(){var e=Object(N.a)(["\n  mutation deleteClient($id: ID!) {\n    deleteClient(id: $id) \n}"]);return O=function(){return e},e}function P(){var e=Object(N.a)(["\n  mutation updateClient($input: ClientInput) {\n    updateClient(input: $input) {\n    \tid\n      company\n      name\n      lastname\n      age\n      type\n      emails{\n        email\n      }\n    }\n  }"]);return P=function(){return e},e}function w(){var e=Object(N.a)(["\n  query getClient($id: ID) {\n    getClient(id: $id) {\n      id\n      company\n      name\n      lastname\n      age\n      type\n      emails{\n        email\n      }\n    }\n  }"]);return w=function(){return e},e}function C(){var e=Object(N.a)(["\n  mutation createClient($input: ClientInput) {\n    createClient(input: $input) {\n      id\n      name\n      lastname\n      age\n    }\n  }"]);return C=function(){return e},e}function k(){var e=Object(N.a)(["    \n  query getClients($limit: Int, $offset: Int, $seller: String) {\n    getClients(limit: $limit, offset: $offset, seller: $seller){\n      id\n      name\n      lastname\n      company\n      type\n    }\n    totalClients(seller: $seller)\n  }"]);return k=function(){return e},e}var S=j()(k()),x=j()(C()),$=j()(w()),A=j()(P()),I=j()(O()),D=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={pagination:{pages:Math.ceil(Number(a.props.total)/a.props.limit)}},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.pagination.currentPage,t=e>1?r.a.createElement("button",{type:"button",onClick:this.props.previousPage,className:"btn btn-success mr-2"},"\xab Anterior"):null,a=e!==this.state.pagination.pages?r.a.createElement("button",{type:"button",onClick:this.props.nextPage,className:"btn btn-success mr-2"},"Siguiente \xbb"):null;return this.props.total<=this.props.limit?null:r.a.createElement("div",{className:"mt-5 mb-5 d-flex justify-content-center"},t,a)}}]),t}(n.Component),q=(a(235),function(){return r.a.createElement("div",{className:"sk-cube-grid"},r.a.createElement("div",{className:"sk-cube sk-cube1"}),r.a.createElement("div",{className:"sk-cube sk-cube2"}),r.a.createElement("div",{className:"sk-cube sk-cube3"}),r.a.createElement("div",{className:"sk-cube sk-cube4"}),r.a.createElement("div",{className:"sk-cube sk-cube5"}),r.a.createElement("div",{className:"sk-cube sk-cube6"}),r.a.createElement("div",{className:"sk-cube sk-cube7"}),r.a.createElement("div",{className:"sk-cube sk-cube8"}),r.a.createElement("div",{className:"sk-cube sk-cube9"}))}),F=function(e){var t=e.message;return r.a.createElement("p",{className:"alert alert-dismissible alert-success py-3 my-3 text-center"},t)},L=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).limit=10,a.state={pagination:{offset:0,currentPage:1},alert:{show:!1,message:""}},a.previousPage=function(){a.setState({pagination:{offset:a.state.pagination.offset-a.limit,currentPage:a.state.pagination.currentPage-1}})},a.nextPage=function(){a.setState({pagination:{offset:a.state.pagination.offset+a.limit,currentPage:a.state.pagination.currentPage+1}})},a.type=function(e){return"PREMIUM"===e?r.a.createElement("span",{className:"badge badge-pill badge-warning"},e):"BASICO"===e?r.a.createElement("span",{className:"badge badge-pill badge-primary"},e):void 0},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.alert,a=t.show,l=t.message,o=a?r.a.createElement(F,{message:l}):null,s="";return"VENDEDOR"===this.props.session.rol&&(s=this.props.session.id),r.a.createElement(i.d,{query:S,pollInterval:1e3,variables:{limit:this.limit,offset:this.state.pagination.offset,seller:s}},function(t){var a=t.loading,l=t.error,s=t.data;t.startPolling,t.stopPolling;return a?r.a.createElement(q,null):l?"Error ".concat(l.message):r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center"},"Lista de Clientes"),o,r.a.createElement("ul",{className:"list-group mt-4"},s.getClients.map(function(t){var a=t.id;return r.a.createElement("li",{key:a,className:"list-group-item"},r.a.createElement("div",{className:"row justify-content-between align-items-center"},r.a.createElement("div",{className:"col-md-6 d-flex justify-content-between align-items-center"},t.name," ",t.lastname," - ",t.company," ",e.type(t.type)),r.a.createElement("div",{className:"col-md-6 d-flex justify-content-end"},r.a.createElement(c.b,{to:"/proyecto/nuevo/".concat(a),className:"btn btn-warning d-block d-md-inline-block mr-2"},"+ Nuevo Proyecto"),r.a.createElement(c.b,{to:"/proyectos/".concat(a),className:"btn btn-info d-block d-md-inline-block mr-2"},"Ver Proyectos"),r.a.createElement(i.c,{mutation:I,onCompleted:function(t){e.setState({alert:{show:!0,message:t.deleteClient}},function(){setTimeout(function(){e.setState({alert:{show:!1,message:""}})},3e3)})}},function(e){return r.a.createElement("button",{type:"button",className:"btn btn-danger d-block d-md-inline-block mr-2",onClick:function(){window.confirm("\xbfSeguro que deseas eliminar este cliente?")&&e({variables:{id:a}})}},"\xd7 Eliminar")}),r.a.createElement(c.b,{to:"/cliente/editar/".concat(t.id),className:"btn btn-success d-block d-md-inline-block"},"Editar Cliente"))))})),r.a.createElement(D,{pagination:e.state.pagination,total:s.totalClients,previousPage:e.previousPage,nextPage:e.nextPage,limit:e.limit}))})}}]),t}(n.Component),T=a(20),U=a(18),R=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={client:{name:"",lastname:"",company:"",age:"",type:""},emails:[],error:!1},a.handleChange=function(e){a.setState({client:Object(U.a)({},a.state.client,Object(T.a)({},e.target.name,e.target.value))})},a.newEmail=function(){a.setState({emails:a.state.emails.concat([{email:""}])})},a.readEmail=function(e){return function(t){var n=a.state.emails.map(function(a,n){return e!==n?a:Object(U.a)({},a,{email:t.target.value})});a.setState({emails:n})}},a.deleteEmail=function(e){return function(){a.setState({emails:a.state.emails.filter(function(t,a){return e!==a})})}},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.error,a=this.props.session.id,l=t?r.a.createElement("p",{className:"alert alert-danger p-3 text-center"},"Todos los campos son requeridos"):null;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center"},"Agregar un Cliente"),l,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(i.c,{mutation:x,onCompleted:function(){return e.props.history.push("/clientes")}},function(t){return r.a.createElement("form",{className:"col-md-8 m-3",onSubmit:function(n){n.preventDefault();var r=e.state.client,l=r.name,o=r.lastname,c=r.company,s=r.age,i=r.type,m=e.state.emails;if(""!==l&&""!==o&&""!==c&&""!==s&&""!==i){e.setState({error:!1});var u={name:l,lastname:o,company:c,emails:m,age:Number(s),type:i,seller:a};t({variables:{input:u}})}else e.setState({error:!0})}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Nombre",onChange:e.handleChange})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Apellido"),r.a.createElement("input",{type:"text",name:"lastname",className:"form-control",placeholder:"Apellido",onChange:e.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",null,"Empresa"),r.a.createElement("input",{type:"text",name:"company",className:"form-control",placeholder:"Empresa",onChange:e.handleChange})),e.state.emails.map(function(t,a){return r.a.createElement("div",{key:a,className:"form-group col-md-12"},r.a.createElement("label",null,"Email: ",a+1,":"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"email",placeholder:"Email",className:"form-control",onChange:e.readEmail(a)}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:e.deleteEmail(a)}," \xd7 Eliminar"))))}),r.a.createElement("div",{className:"form-group d-flex justify-content-center col-md-12"},r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:e.newEmail}," + Agregar Email"))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Edad"),r.a.createElement("input",{type:"text",name:"age",className:"form-control",placeholder:"Edad",onChange:e.handleChange})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Tipo Cliente"),r.a.createElement("select",{className:"form-control",name:"type",onChange:e.handleChange},r.a.createElement("option",{value:""},"Elegir..."),r.a.createElement("option",{value:"PREMIUM"},"PREMIUM"),r.a.createElement("option",{value:"BASICO"},"BASICO")))),r.a.createElement("button",{type:"submit",className:"btn btn-success float-right"},"Agregar Cliente"))})))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={client:a.props.client,emails:a.props.client.emails},a.handleChange=function(e){a.setState({client:Object(U.a)({},a.state.client,Object(T.a)({},e.target.name,e.target.value))})},a.newEmail=function(){a.setState({emails:a.state.emails.concat([{email:""}])})},a.readEmail=function(e){return function(t){var n=a.state.emails.map(function(a,n){return e!==n?a:Object(U.a)({},a,{email:t.target.value})});a.setState({emails:n})}},a.deleteEmail=function(e){return function(){a.setState({emails:a.state.emails.filter(function(t,a){return e!==a})})}},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.client,a=t.name,n=t.lastname,l=t.company,o=t.type,c=t.age;return r.a.createElement(i.c,{mutation:A,onCompleted:function(){return e.props.refetch().then(function(){e.props.history.push("/clientes")})}},function(t){return r.a.createElement("form",{className:"col-md-8 m-3",onSubmit:function(a){a.preventDefault();var n=e.state.client,r=n.id,l=n.name,o=n.lastname,c=n.age,s=n.company,i=n.type,m={id:r,name:l,lastname:o,age:Number(c),company:s,type:i,emails:e.state.emails};t({variables:{input:m}})}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Nombre",onChange:e.handleChange,defaultValue:a})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Apellido"),r.a.createElement("input",{type:"text",name:"lastname",className:"form-control",placeholder:"Apellido",onChange:e.handleChange,defaultValue:n}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",null,"Empresa"),r.a.createElement("input",{type:"text",name:"company",className:"form-control",placeholder:"Empresa",onChange:e.handleChange,defaultValue:l})),e.state.emails.map(function(t,a){return r.a.createElement("div",{key:a,className:"form-group col-md-12"},r.a.createElement("label",null,"Email: ",a+1,":"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"email",placeholder:"Email",className:"form-control",onChange:e.readEmail(a),defaultValue:t.email}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:e.deleteEmail(a)}," \xd7 Eliminar"))))}),r.a.createElement("div",{className:"form-group d-flex justify-content-center col-md-12"},r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:e.newEmail}," + Agregar Email"))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Edad"),r.a.createElement("input",{type:"text",name:"age",className:"form-control",placeholder:"Edad",onChange:e.handleChange,defaultValue:c})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Tipo Cliente"),r.a.createElement("select",{className:"form-control",name:"type",onChange:e.handleChange,defaultValue:o},r.a.createElement("option",{value:""},"Elegir..."),r.a.createElement("option",{value:"PREMIUM"},"PREMIUM"),r.a.createElement("option",{value:"BASICO"},"BASICO")))),r.a.createElement("button",{type:"submit",className:"btn btn-success float-right"},"Editar Cliente"))})}}]),t}(n.Component),V=Object(s.g)(M),Q=function(e){function t(){return Object(g.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center"},"Editar Cliente"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(i.d,{query:$,variables:{id:e}},function(e){var t=e.loading,a=e.error,n=e.data,l=e.refetch;return t?"Loading...":a?"Error ".concat(a.message):r.a.createElement(V,{client:n.getClient,refetch:l})})))}}]),t}(n.Component);function B(){var e=Object(N.a)(["\n  mutation deleteProvider($id: ID!) {\n    deleteProvider(id: $id) \n}"]);return B=function(){return e},e}function z(){var e=Object(N.a)(["\n  mutation updateProvider($input: ProviderInput) {\n    updateProvider(input: $input) {\n    \tid\n      company\n      name\n      lastname\n      emails{\n        email\n      }\n    }\n  }"]);return z=function(){return e},e}function G(){var e=Object(N.a)(["\n  mutation createProvider($input: ProviderInput){\n    createProvider(input: $input){\n      id\n      name\n      lastname\n      company\n      emails {\n        email\n      }\n    }\n  }\n"]);return G=function(){return e},e}function J(){var e=Object(N.a)(["\n  query getProvider($id: ID) {\n    getProvider(id: $id) {\n      id\n      company\n      name\n      lastname\n      emails{\n        email\n      }\n    }\n  }"]);return J=function(){return e},e}function K(){var e=Object(N.a)(["    \n  query getProviders($limit: Int, $offset: Int, $seller: String) {\n    getProviders(limit: $limit, offset: $offset, seller: $seller){\n      id\n      name\n      lastname\n      company\n    }\n    totalProviders(seller: $seller)\n  }"]);return K=function(){return e},e}var W=j()(K()),X=j()(J()),Y=j()(G()),_=j()(z()),H=j()(B()),Z=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).limit=10,a.state={pagination:{offset:0,currentPage:1},alert:{show:!1,message:""}},a.previousPage=function(){a.setState({pagination:{offset:a.state.pagination.offset-a.limit,currentPage:a.state.pagination.currentPage-1}})},a.nextPage=function(){a.setState({pagination:{offset:a.state.pagination.offset+a.limit,currentPage:a.state.pagination.currentPage+1}})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.alert,a=t.show,l=t.message,o=a?r.a.createElement(F,{message:l}):null,s="";return"VENDEDOR"===this.props.session.rol&&(s=this.props.session.idCLIENTS_QUERY),r.a.createElement(i.d,{query:W,pollInterval:1e3,variables:{limit:this.limit,offset:this.state.pagination.offset,seller:s}},function(t){var a=t.loading,l=t.error,s=t.data;t.startPolling,t.stopPolling;return a?r.a.createElement(q,null):l?"Error ".concat(l.message):r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center"},"Lista de Proveedores"),o,r.a.createElement("ul",{className:"list-group mt-4"},s.getProviders.map(function(t){var a=t.id;return r.a.createElement("li",{key:a,className:"list-group-item"},r.a.createElement("div",{className:"row justify-content-between align-items-center"},r.a.createElement("div",{className:"col-md-6 d-flex justify-content-between align-items-center"},t.name," ",t.lastname," - ",t.company),r.a.createElement("div",{className:"col-md-6 d-flex justify-content-end"},r.a.createElement(c.b,{to:"/pedido/nuevo/".concat(a),className:"btn btn-warning d-block d-md-inline-block mr-2"},"+ Nuevo Pedido"),r.a.createElement(c.b,{to:"/pedidos/".concat(a),className:"btn btn-info d-block d-md-inline-block mr-2"},"Ver Pedidos"),r.a.createElement(i.c,{mutation:H,onCompleted:function(t){e.setState({alert:{show:!0,message:t.deleteProvider}},function(){setTimeout(function(){e.setState({alert:{show:!1,message:""}})},3e3)})}},function(e){return r.a.createElement("button",{type:"button",className:"btn btn-danger d-block d-md-inline-block mr-2",onClick:function(){window.confirm("\xbfSeguro que deseas eliminar este proveedor?")&&e({variables:{id:a}})}},"\xd7 Eliminar")}),r.a.createElement(c.b,{to:"/proveedor/editar/".concat(t.id),className:"btn btn-success d-block d-md-inline-block"},"Editar Proveedor"))))})),r.a.createElement(D,{pagination:e.state.pagination,total:s.totalProviders,previousPage:e.previousPage,nextPage:e.nextPage,limit:e.limit}))})}}]),t}(n.Component),ee=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={provider:{name:"",lastname:"",company:""},emails:[],error:!1},a.handleChange=function(e){a.setState({provider:Object(U.a)({},a.state.provider,Object(T.a)({},e.target.name,e.target.value))})},a.newEmail=function(){a.setState({emails:a.state.emails.concat([{email:""}])})},a.readEmail=function(e){return function(t){var n=a.state.emails.map(function(a,n){return e!==n?a:Object(U.a)({},a,{email:t.target.value})});a.setState({emails:n})}},a.deleteEmail=function(e){return function(){a.setState({emails:a.state.emails.filter(function(t,a){return e!==a})})}},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.error?r.a.createElement("p",{className:"alert alert-danger p-3 text-center"},"Todos los campos son requeridos"):null;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center"},"Agregar un Proveedor"),t,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(i.c,{mutation:Y,onCompleted:function(){return e.props.history.push("/proveedores")}},function(t){return r.a.createElement("form",{className:"col-md-8 m-3",onSubmit:function(a){a.preventDefault();var n=e.state.provider,r=n.name,l=n.lastname,o=n.company,c=e.state.emails;""!==r&&""!==l&&""!==o?(e.setState({error:!1}),t({variables:{input:{name:r,lastname:l,company:o,emails:c}}})):e.setState({error:!0})}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Nombre",onChange:e.handleChange})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Apellido"),r.a.createElement("input",{type:"text",name:"lastname",className:"form-control",placeholder:"Apellido",onChange:e.handleChange}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",null,"Empresa"),r.a.createElement("input",{type:"text",name:"company",className:"form-control",placeholder:"Empresa",onChange:e.handleChange})),e.state.emails.map(function(t,a){return r.a.createElement("div",{key:a,className:"form-group col-md-12"},r.a.createElement("label",null,"Email: ",a+1,":"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"email",placeholder:"Email",className:"form-control",onChange:e.readEmail(a)}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:e.deleteEmail(a)}," \xd7 Eliminar"))))}),r.a.createElement("div",{className:"form-group d-flex justify-content-center col-md-12"},r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:e.newEmail}," + Agregar Email"))),r.a.createElement("button",{type:"submit",className:"btn btn-success float-right"},"Agregar Cliente"))})))}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={provider:a.props.provider,emails:a.props.provider.emails},a.handleChange=function(e){a.setState({provider:Object(U.a)({},a.state.provider,Object(T.a)({},e.target.name,e.target.value))})},a.newEmail=function(){a.setState({emails:a.state.emails.concat([{email:""}])})},a.readEmail=function(e){return function(t){var n=a.state.emails.map(function(a,n){return e!==n?a:Object(U.a)({},a,{email:t.target.value})});a.setState({emails:n})}},a.deleteEmail=function(e){return function(){a.setState({emails:a.state.emails.filter(function(t,a){return e!==a})})}},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.provider,a=t.name,n=t.lastname,l=t.company;return r.a.createElement(i.c,{mutation:_,onCompleted:function(){return e.props.refetch().then(function(){e.props.history.push("/proveedores")})}},function(t){return r.a.createElement("form",{className:"col-md-8 m-3",onSubmit:function(a){a.preventDefault();var n=e.state.provider,r={id:n.id,name:n.name,lastname:n.lastname,company:n.company,emails:e.state.emails};t({variables:{input:r}})}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Nombre",onChange:e.handleChange,defaultValue:a})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Apellido"),r.a.createElement("input",{type:"text",name:"lastname",className:"form-control",placeholder:"Apellido",onChange:e.handleChange,defaultValue:n}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",null,"Empresa"),r.a.createElement("input",{type:"text",name:"company",className:"form-control",placeholder:"Empresa",onChange:e.handleChange,defaultValue:l})),e.state.emails.map(function(t,a){return r.a.createElement("div",{key:a,className:"form-group col-md-12"},r.a.createElement("label",null,"Email: ",a+1,":"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"email",placeholder:"Email",className:"form-control",onChange:e.readEmail(a),defaultValue:t.email}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:e.deleteEmail(a)}," \xd7 Eliminar"))))}),r.a.createElement("div",{className:"form-group d-flex justify-content-center col-md-12"},r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:e.newEmail}," + Agregar Email"))),r.a.createElement("button",{type:"submit",className:"btn btn-success float-right"},"Editar Proveedor"))})}}]),t}(n.Component),ae=Object(s.g)(te),ne=function(e){function t(){return Object(g.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center"},"Editar Proveedor"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(i.d,{query:X,variables:{id:e}},function(e){var t=e.loading,a=e.error,n=e.data,l=e.refetch;return t?"Loading...":a?"Error ".concat(a.message):r.a.createElement(ae,{provider:n.getProvider,refetch:l})})))}}]),t}(n.Component);function re(){var e=Object(N.a)(["\n    query getOrders($client: String) {\n        getOrders(client: $client){\n            id\n            total\n            date\n            status\n            order{\n                id\n                quantity\n            }\n        }\n    }\n"]);return re=function(){return e},e}function le(){var e=Object(N.a)(["\n    mutation updateStatus($input: OrderInput) {\n        updateStatus(input: $input)\n    }\n"]);return le=function(){return e},e}function oe(){var e=Object(N.a)(["\n    mutation addOrder($input: OrderInput) {\n        addOrder(input: $input){\n            id\n        }\n    }\n"]);return oe=function(){return e},e}var ce=j()(oe()),se=j()(le()),ie=j()(re());function me(){var e=Object(N.a)(["\n  mutation updateProduct($input: ProductInput) {\n    updateProduct(input: $input){\n      id\n      name\n      price\n      stock\n    }\n  }\n"]);return me=function(){return e},e}function ue(){var e=Object(N.a)(["\n  query getProduct($id: ID) {\n    getProduct(id: $id){\n      name\n      price\n      stock\n    }\n  }\n"]);return ue=function(){return e},e}function de(){var e=Object(N.a)(["\n  mutation deleteProduct($id: ID!) {\n    deleteProduct(id: $id)\n  }\n"]);return de=function(){return e},e}function pe(){var e=Object(N.a)(["\n  query getProducts($limit: Int, $offset: Int, $stock: Boolean) {\n    getProducts(limit: $limit, offset: $offset, stock: $stock){\n      id\n      name\n      price\n      stock\n    }\n    totalProducts\n  }\n"]);return pe=function(){return e},e}function fe(){var e=Object(N.a)(["\nmutation addProduct($input: ProductInput) {\n  addProduct(input: $input){\n    name\n  }\n}"]);return fe=function(){return e},e}var ge=j()(fe()),Ee=j()(pe()),be=j()(de()),he=j()(ue()),ve=j()(me()),Ne=function(e){var t=e.quantity,a=e.product,l=a.name,o=a.price;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"content-products mb-4 p-4"},r.a.createElement("p",{className:"card-text font-weight-bold"},"Nombre del Producto:",r.a.createElement("span",{className:"font-weight-normal"}," ",l)),r.a.createElement("p",{className:"card-text font-weight-bold"},"Cantidad:",r.a.createElement("span",{className:"font-weight-normal"}," ",t)),r.a.createElement("p",{className:"card-text font-weight-bold"},"Precio:",r.a.createElement("span",{className:"font-weight-normal"}," $",o))))},ye=(a(236),function(e){var t,a=e.order,n=a.id,l=a.order,o=a.date,c=a.total,s=a.status,m=e.provider,u=new Date(Number(o));return t="PENDIENTE"===s?"border-light":"CANCELADO"===s?"border-danger":"border-success",r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card mb-3 ".concat(t)},r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text font-weight-bold "},"Estado:",r.a.createElement(i.c,{mutation:se},function(e){return r.a.createElement("select",{disabled:"COMPLETADO"===s,className:"form-control my-3",value:s,onChange:function(t){var a={id:n,order:l,date:o,total:c,status:t.target.value,provider:m};e({variables:{input:a}})}},r.a.createElement("option",{value:"PENDIENTE"},"PENDIENTE"),r.a.createElement("option",{value:"COMPLETADO"},"COMPLETADO"),r.a.createElement("option",{value:"CANCELADO"},"CANCELADO"))})),r.a.createElement("p",{className:"card-text font-weight-bold"},"Pedido ID:",r.a.createElement("span",{className:"font-weight-normal"}," ",n)),r.a.createElement("p",{className:"card-text font-weight-bold"},"Fecha Pedido:",r.a.createElement("span",{className:"font-weight-normal"}," ",u.toLocaleString("es-MX"))),r.a.createElement("h3",{className:"card-text text-center mb-3 resaltar-texto"},"Art\xedculos del pedido"),l.map(function(e,t){var a=e.id,n=e.quantity;return r.a.createElement(i.d,{key:t,query:he,variables:{id:a}},function(e){var t=e.loading,l=e.error,o=e.data;return t?r.a.createElement(q,null):l?"Error ".concat(l.message):r.a.createElement(Ne,{product:o.getProduct,quantity:n,key:a})})}),r.a.createElement("div",{className:"d-flex align-items-center justify-content-end"},r.a.createElement("p",{className:"card-text resaltar-texto mr-1"},"Total:"),r.a.createElement("p",{className:"font-weight-normal inc-text"}," $",c)))))}),je=function(e){var t=e.match.params.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center my-2"},"Pedidos al Proveedor"),r.a.createElement("div",{className:"row"},r.a.createElement(i.d,{query:ie,variables:{provider:t},pollInterval:1e3},function(e){var a=e.loading,n=e.error,l=e.data;return e.startPolling,e.stopPolling,a?r.a.createElement(q,null):n?"Error ".concat(n.message):l.getOrders.map(function(e){return r.a.createElement(ye,{key:e.id,order:e,provider:t})})})))},Oe={name:"",price:"",stock:""},Pe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=Object(U.a)({},Oe),a.cleanState=function(){a.setState(Object(U.a)({},Oe))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(T.a)({},n,r))},a.validateForm=function(){var e=a.state,t=e.name,n=e.price,r=e.stock;return!t||!n||!r},a.createNewProduct=function(e,t){e.preventDefault(),t().then(function(e){a.cleanState(),a.props.history.push("/productos")})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,l=t.price,o=t.stock,c={name:a,price:Number(l),stock:Number(o)};return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center mb-5"},"Nuevo Producto"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(i.c,{mutation:ge,variables:{input:c}},function(t,a){a.loading,a.error,a.data;return r.a.createElement("form",{className:"col-md-8",onSubmit:function(a){return e.createNewProduct(a,t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Nombre del Producto",onChange:e.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Precio:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"$")),r.a.createElement("input",{type:"number",name:"price",className:"form-control",placeholder:"Precio del Producto",onChange:e.handleChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Stock:"),r.a.createElement("input",{type:"number",name:"stock",className:"form-control",placeholder:"Stock del Producto",onChange:e.handleChange})),r.a.createElement("button",{disabled:e.validateForm(),type:"submit",className:"btn btn-success float-right"},"Crear Producto"))})))}}]),t}(n.Component),we=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).limit=10,a.state={alert:{show:!1,message:""},pagination:{offset:0,currentPage:1}},a.previousPage=function(){a.setState({pagination:{offset:a.state.pagination.offset-a.limit,currentPage:a.state.pagination.currentPage-1}})},a.nextPage=function(){a.setState({pagination:{offset:a.state.pagination.offset+a.limit,currentPage:a.state.pagination.currentPage+1}})},a.status=function(e){return e<=10?r.a.createElement("span",{className:"badge badge-pill badge-danger"},"Pocas unidades"):e>10&&e<=30?r.a.createElement("span",{className:"badge badge-pill badge-warning"},"Se esta empezando a acabar"):r.a.createElement("span",{className:"badge badge-pill badge-success"},"Buena cantidad de unidades")},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.alert,a=t.show,l=t.message,o=a?r.a.createElement(F,{message:l}):null;return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center mb-5"},"Productos"),o,r.a.createElement(i.d,{query:Ee,pollInterval:1e3,variables:{limit:this.limit,offset:this.state.pagination.offset}},function(t){var a=t.loading,l=t.error,o=t.data;t.startPolling,t.stopPolling;return a?r.a.createElement(q,null):l?"Error ".concat(l.message):r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"table-primary"},r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Precio"),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Acciones"))),r.a.createElement("tbody",null,o.getProducts.map(function(t){var a=t.id,n=t.stock,l=t.price,o=t.name;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,o),r.a.createElement("td",null,"$ ",l),r.a.createElement("td",null,n),r.a.createElement("td",null,e.status(n)),r.a.createElement("td",null,r.a.createElement(c.b,{to:"producto/editar/".concat(a),className:"btn btn-success mr-2"},"Editar Producto"),r.a.createElement(i.c,{mutation:be,onCompleted:function(t){e.setState({alert:{show:!0,message:t.deleteProduct}},function(){setTimeout(function(){e.setState({alert:{show:!1,message:""}})},3e3)})}},function(e){return r.a.createElement("button",{onClick:function(){window.confirm("\xbfSeguro que deseas eliminar el producto?")&&e({variables:{id:a}})},type:"button",className:"btn btn-danger"},"\xd7 Eliminar")})))}))),r.a.createElement(D,{pagination:e.state.pagination,total:o.totalProducts,previousPage:e.previousPage,nextPage:e.nextPage,limit:e.limit}))}))}}]),t}(n.Component),Ce={name:"",price:"",stock:""},ke=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=Object(U.a)({},a.props.product.getProduct),a.cleanState=function(){a.setState(Object(U.a)({},Ce))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(T.a)({},n,r))},a.validateForm=function(){var e=a.state,t=e.name,n=e.price,r=e.stock;return!t||!n||!r},a.updateProductForm=function(e,t){e.preventDefault(),t().then(function(e){a.cleanState()})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.price,l=t.stock,o=this.props.id,c={id:o,name:a,price:Number(n),stock:Number(l)};return r.a.createElement(i.c,{mutation:ve,variables:{input:c},key:o,onCompleted:function(){return e.props.refetch().then(function(){e.props.history.push("/productos")})}},function(t,o){o.loading,o.error,o.data;return r.a.createElement("form",{className:"col-md-8",onSubmit:function(a){return e.updateProductForm(a,t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{onChange:e.handleChange,type:"text",name:"name",className:"form-control",placeholder:"Nombre del Producto",value:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Precio:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"$")),r.a.createElement("input",{onChange:e.handleChange,type:"number",name:"price",className:"form-control",placeholder:"Precio del Producto",value:n}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Stock:"),r.a.createElement("input",{onChange:e.handleChange,type:"number",name:"stock",className:"form-control",placeholder:"Stock del Producto",value:l})),r.a.createElement("button",{disabled:e.validateForm(),type:"submit",className:"btn btn-success float-right"},"Guardar Cambios"))})}}]),t}(n.Component),Se=Object(s.g)(ke),xe=function(e){function t(){return Object(g.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center"},"Editar Producto"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(i.d,{query:he,variables:{id:e}},function(t){var a=t.loading,n=t.error,l=t.data,o=t.refetch;return a?"Loading...":n?"Error ".concat(n.message):r.a.createElement(Se,{id:e,product:l,refetch:o})})))}}]),t}(n.Component),$e=a(85),Ae=a(87),Ie=a.n(Ae),De=function(e){function t(){return Object(g.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product;return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,"$",t.price),r.a.createElement("td",null,t.stock),r.a.createElement("td",null,r.a.createElement("input",{min:"1",type:"number",className:"form-control",onChange:function(t){e.props.updateQuantity(t.target.value,e.props.index)}})),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn btn-danger font-weight-bold",onClick:function(a){return e.props.deleteProduct(t.id)}},"\xd7 Eliminar"))))}}]),t}(n.Component),qe=function(e){var t=e.products,a=e.updateQuantity,l=e.deleteProduct;return 0===t.length?null:r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center my-5"},"Resumen y Cantidades"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"bg-success text-light"},r.a.createElement("tr",{className:"font-weight-bold"},r.a.createElement("th",null,"Producto"),r.a.createElement("th",null,"Precio"),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Cantidad"),r.a.createElement("th",null,"Acciones"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement(De,{key:e.id,id:e.id,product:e,index:t,updateQuantity:a,deleteProduct:l})}))))},Fe=a(44),Le=Object(s.g)(function(e){var t=e.order,a=t.products,n=t.total,l=e.idProvider,o=e.history,c=e.refetch,s=e.idSeller,m=!a||n<=0;return r.a.createElement(i.c,{mutation:ce,onCompleted:function(){return c().then(function(){o.push("/proveedores")})}},function(e){return r.a.createElement("button",{disabled:m,type:"button",className:"btn btn-lg btn-info mt-4",onClick:function(t){var r=a.map(function(e){return e.name,e.price,e.stock,Object(Fe.a)(e,["name","price","stock"])});e({variables:{input:{order:r,total:n,provider:l,seller:s}}})}},"Guardar Pedido")})}),Te=function(e){var t=e.message;return r.a.createElement("p",{className:"alert alert-dismissible alert-danger py-3 my-3 text-center"},t)},Ue=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={products:[],total:0},a.handleChange=function(e){a.setState({products:e})},a.updateTotal=function(){var e=a.state.products;if(0!==e.length){var t=0;e.map(function(e){return t+=e.quantity*e.price}),a.setState({total:t})}else a.setState({total:0})},a.updateQuantity=function(e,t){var n=a.state.products;n[t].quantity=Number(e),a.setState({products:n},function(){return a.updateTotal()})},a.deleteProduct=function(e){var t=a.state.products.filter(function(t){return t.id!==e});a.setState({products:t},function(){return a.updateTotal()})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=0!==this.state.products.length?r.a.createElement(Le,{idSeller:this.props.idSeller,order:this.state,idProvider:this.props.id,refetch:this.props.refetch}):null,t=this.state.total<0?r.a.createElement(Te,{message:"Las cantidades no pueden ser negativas"}):null;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center mb-5"},"Seleccionar Art\xedculos"),t,r.a.createElement($e.a,{closeMenuOnSelect:!1,components:Ie()(),isMulti:!0,options:this.props.products,placeholder:"Seleccionar Productos",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},onChange:this.handleChange,value:this.state.products}),r.a.createElement(qe,{products:this.state.products,updateQuantity:this.updateQuantity,deleteProduct:this.deleteProduct}),r.a.createElement("p",{className:"font-weight-bold float-right mt-5"},"Total:",r.a.createElement("span",{className:"font-weight-normal"}," $",this.state.total)),e)}}]),t}(n.Component),Re=function(e){var t=e.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center mb-3"},"Resumen del Proveedor"),r.a.createElement(i.d,{query:X,variables:{id:t},pollInterval:1e3},function(e){var t=e.loading,a=e.error,n=e.data;if(e.startPolling,e.stopPolling,t)return"Loading...";if(a)return"Error ".concat(a.message);var l=n.getProvider,o=l.name,c=l.lastname,s=l.emails,i=l.company;return r.a.createElement("ul",{className:"list-unstyled my-5"},r.a.createElement("li",{className:"border font-weight-bold p-2"},"Nombre: ",r.a.createElement("span",{className:"font-weight-normal"},o)),r.a.createElement("li",{className:"border font-weight-bold p-2"},"Apellido: ",r.a.createElement("span",{className:"font-weight-normal"},c)),r.a.createElement("li",{className:"border font-weight-bold p-2"},"Emails: ",r.a.createElement("br",null),r.a.createElement("span",{className:"font-weight-normal"},s.map(function(e){return" ".concat(e.email," ")}))),r.a.createElement("li",{className:"border font-weight-bold p-2"},"Empresa: ",r.a.createElement("span",{className:"font-weight-normal"},i)))}))},Me=function(e){function t(){return Object(g.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id,t=this.props.session.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center"},"Pedidos"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Re,{id:e})),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(i.d,{query:Ee},function(a){var n=a.loading,l=a.error,o=a.data,c=a.refetch;a.startPolling,a.stopPolling;return n?r.a.createElement(q,null):l?"Error ".concat(l.message):r.a.createElement(Ue,{id:e,products:o.getProducts,refetch:c,idSeller:t})}))))}}]),t}(n.Component);function Ve(){var e=Object(N.a)(["\n    query topSellers {\n        topSellers{\n            total\n            seller{\n                id\n                user\n                name\n                rol\n            }\n        }\n    }\n"]);return Ve=function(){return e},e}function Qe(){var e=Object(N.a)(["\n    query topClients {\n        topClients{\n            total\n            client{\n                name\n            }\n        }\n    }\n"]);return Qe=function(){return e},e}var Be=j()(Qe()),ze=(j()(Ve()),a(50)),Ge=function(){return r.a.createElement(i.d,{query:Be},function(e){var t=e.loading,a=e.error,n=e.data;if(t)return r.a.createElement(q,null);if(a)return"Error ".concat(a.message);var l=[];return n.topClients.map(function(e,t){return l[t]=Object(U.a)({},e.client[0],{total:e.total})}),r.a.createElement(ze.b,{width:700,height:400,data:l,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(ze.c,{strokeDasharray:"3 3"}),r.a.createElement(ze.e,{dataKey:"name"}),r.a.createElement(ze.f,null),r.a.createElement(ze.d,null),r.a.createElement(ze.a,{dataKey:"total",fill:"#109a8b"}))})},Je=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center my-5"},"Top 10 Clientes"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(Ge,null)))};function Ke(){var e=Object(N.a)(["\n  mutation updateUser($input: UserInput) {\n    updateUser(input: $input){\n        id\n        user\n        name\n        rol\n    }\n  }\n"]);return Ke=function(){return e},e}function We(){var e=Object(N.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id)\n  }\n"]);return We=function(){return e},e}function Xe(){var e=Object(N.a)(["\n  query getUsers($limit: Int, $offset: Int) {\n    getUsers(limit: $limit, offset: $offset){\n      id\n      user\n      name\n      rol\n    }\n    totalUsers\n  }\n"]);return Xe=function(){return e},e}function Ye(){var e=Object(N.a)(["\n  query getSingleUser($id: ID) {\n    getSingleUser(id: $id){\n      id\n      user\n      name\n      rol\n    }\n  }\n"]);return Ye=function(){return e},e}function _e(){var e=Object(N.a)(["\n    query getUser {\n        getUser {\n            id\n            user\n            name\n            rol\n        }\n    }    \n"]);return _e=function(){return e},e}function He(){var e=Object(N.a)(["\n    mutation authUser($user: String!, $password: String!) {\n        authUser(user: $user, password: $password){\n            token\n        }\n    }\n"]);return He=function(){return e},e}function Ze(){var e=Object(N.a)(["\n    mutation createUser($user: String!, $password: String!, $name: String!, $rol: String!) {\n        createUser(user: $user, password: $password, name: $name, rol: $rol)\n    }\n"]);return Ze=function(){return e},e}var et=j()(Ze()),tt=j()(He()),at=j()(_e()),nt=j()(Ye()),rt=j()(Xe()),lt=j()(We()),ot=j()(Ke()),ct={user:"",password:"",repeatPassword:"",name:"",rol:""},st=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=Object(U.a)({},ct),a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(T.a)({},n,r))},a.validateForm=function(){var e=a.state,t=e.user,n=e.password,r=e.repeatPassword,l=e.name,o=e.rol;return!t||!l||!o||!n||n!==r},a.cleanState=function(){a.setState(Object(U.a)({},ct))},a.createRegistry=function(e,t){e.preventDefault(),t().then(function(e){a.cleanState(),a.props.history.push("/usuarios")}).catch(function(e){console.error(e)})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,l=t.password,o=t.repeatPassword,c=t.name,m=t.rol,u="ADMINISTRADOR"!==this.props.session.rol?r.a.createElement(s.a,{to:"/panel"}):null;return r.a.createElement(n.Fragment,null,u,r.a.createElement("h1",{className:"text-center mb-5"},"Nuevo Usuario"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(i.c,{mutation:et,variables:{user:a,password:l,name:c,rol:m}},function(t,n){var s=n.loading,i=n.error;n.data;return r.a.createElement("form",{className:"col-md-8",onSubmit:function(a){return e.createRegistry(a,t)}},i?r.a.createElement(Te,{message:i.message}):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Usuario"),r.a.createElement("input",{type:"text",name:"user",className:"form-control",placeholder:"Nombre Usuario",onChange:e.handleChange,value:a}),r.a.createElement("small",{className:"form-text text-muted"},"(Sin espacios, ni caracteres especiales)")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Nombre Completo",onChange:e.handleChange,value:c}),r.a.createElement("small",{className:"form-text text-muted"},"(Agrega el nombre completo con apellidos)")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",onChange:e.handleChange,value:l})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Repetir Password"),r.a.createElement("input",{type:"password",name:"repeatPassword",className:"form-control",placeholder:"Repetir Password",onChange:e.handleChange,value:o}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Rol:"),r.a.createElement("select",{name:"rol",className:"form-control",value:m,onChange:e.handleChange},r.a.createElement("option",{defaultValue:!0},"Elegir:"),r.a.createElement("option",{value:"ADMINISTRADOR"},"Administrador"),r.a.createElement("option",{value:"VENDEDOR"},"Vendedor"))),r.a.createElement("button",{disabled:s||e.validateForm(),type:"submit",className:"btn btn-success float-right"},"Crear Usuario"))})))}}]),t}(n.Component),it=Object(s.g)(st),mt=a(124),ut=a.n(mt),dt=a(190),pt={user:"",password:""},ft=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state=Object(U.a)({},pt),a.actualizarState=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(T.a)({},n,r))},a.limpiarState=function(){a.setState(Object(U.a)({},pt))},a.iniciarSesion=function(e,t){e.preventDefault(),t().then(function(){var e=Object(dt.a)(ut.a.mark(function e(t){var n;return ut.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,sessionStorage.setItem("token",n.authUser.token),e.next=4,a.props.refetch();case 4:a.limpiarState(),a.props.history.push("/panel");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.error(e)})},a.validarForm=function(){var e=a.state,t=e.user,n=e.password;return!t||!n},a.logOut=function(e){if(e)return r.a.createElement(s.a,{to:"/panel"})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,l=t.password;return r.a.createElement(n.Fragment,null,this.logOut(sessionStorage.getItem("token")),r.a.createElement("h1",{className:"text-center mb-5"},"Iniciar Sesi\xf3n"),r.a.createElement("div",{className:"row  justify-content-center"},r.a.createElement(i.c,{mutation:tt,variables:{user:a,password:l}},function(t,n){var o=n.loading,c=n.error;n.data;return r.a.createElement("form",{onSubmit:function(a){return e.iniciarSesion(a,t)},className:"col-md-8"},c?r.a.createElement(Te,{message:c.message}):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Usuario"),r.a.createElement("input",{onChange:e.actualizarState,value:a,type:"text",name:"user",className:"form-control",placeholder:"Nombre Usuario"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{onChange:e.actualizarState,value:l,type:"password",name:"password",className:"form-control",placeholder:"Password"})),r.a.createElement("button",{disabled:o||e.validarForm(),type:"submit",className:"btn btn-success float-right"},"Iniciar Sesi\xf3n"))})))}}]),t}(n.Component),gt=Object(s.g)(ft),Et=function(e){return function(t){return r.a.createElement(i.d,{query:at},function(a){var n=a.loading,l=(a.error,a.data),o=a.refetch;return n?null:r.a.createElement(e,Object.assign({},t,{refetch:o,session:l}))})}},bt=a(191),ht=a.n(bt),vt=function(e){var t=e.component,a=e.session,n=Object(Fe.a)(e,["component","session"]),l=sessionStorage.getItem("token");return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return l?(function(e){try{ht()(e).exp<Date.now()/1e3&&(sessionStorage.removeItem("token",""),window.location.reload())}catch(t){return!1}}(l),r.a.createElement(t,Object.assign({},e,{session:a}))):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Nt=function(e){var t=e.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center mb-3"},"Resumen de Cliente"),r.a.createElement(i.d,{query:$,variables:{id:t},pollInterval:1e3},function(e){var t=e.loading,a=e.error,n=e.data;if(e.startPolling,e.stopPolling,t)return"Loading...";if(a)return"Error ".concat(a.message);var l=n.getClient,o=l.name,c=l.lastname,s=l.age,i=l.emails,m=l.company,u=l.type;return r.a.createElement("ul",{className:"list-unstyled my-5"},r.a.createElement("li",{className:"border font-weight-bold p-2"},"Nombre: ",r.a.createElement("span",{className:"font-weight-normal"},o)),r.a.createElement("li",{className:"border font-weight-bold p-2"},"Apellido: ",r.a.createElement("span",{className:"font-weight-normal"},c)),r.a.createElement("li",{className:"border font-weight-bold p-2"},"Edad: ",r.a.createElement("span",{className:"font-weight-normal"},s)),r.a.createElement("li",{className:"border font-weight-bold p-2"},"Emails: ",r.a.createElement("br",null),r.a.createElement("span",{className:"font-weight-normal"},i.map(function(e){return" ".concat(e.email," ")}))),r.a.createElement("li",{className:"border font-weight-bold p-2"},"Empresa: ",r.a.createElement("span",{className:"font-weight-normal"},m)),r.a.createElement("li",{className:"border font-weight-bold p-2"},"Tipo: ",r.a.createElement("span",{className:"font-weight-normal"},u)))}))},yt=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).limit=r.a.createRef(),a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product;return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,"$",t.price),r.a.createElement("td",null,t.stock),r.a.createElement("td",null,r.a.createElement("input",{min:"1",type:"number",className:"form-control",onChange:function(t){Number(t.target.value)>e.limit.current.value&&(t.target.value=e.limit.current.value),e.props.updateQuantity(t.target.value,e.props.index)}})),r.a.createElement("td",null,r.a.createElement("input",{min:"1",type:"number",className:"form-control",ref:this.limit,defaultValue:"0",onChange:function(a){a.target.value>t.stock&&(a.target.value=t.stock),e.props.updateLimit(a.target.value,e.props.index)}})),r.a.createElement("td",{className:"col-2"},r.a.createElement("button",{type:"button",className:"btn btn-danger font-weight-bold",onClick:function(a){return e.props.deleteProduct(t.id)}},"\xd7 Eliminar"))))}}]),t}(n.Component),jt=function(e){var t=e.products,a=e.updateQuantity,l=e.updateLimit,o=e.deleteProduct;return 0===t.length?null:r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center my-5"},"Resumen y Cantidades"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"bg-success text-light"},r.a.createElement("tr",{className:"font-weight-bold"},r.a.createElement("th",null,"Producto"),r.a.createElement("th",null,"Precio"),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Cantidad"),r.a.createElement("th",null,"Limite"),r.a.createElement("th",null,"Acciones"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement(yt,{key:e.id,id:e.id,product:e,index:t,updateQuantity:a,updateLimit:l,deleteProduct:o})}))))};function Ot(){var e=Object(N.a)(["\n  mutation deleteProject($id: ID!) {\n    deleteProject(id: $id) \n}"]);return Ot=function(){return e},e}function Pt(){var e=Object(N.a)(["\n    mutation updateProject($input: ProjectInput) {\n        updateProject(input: $input) {\n            id\n            name\n            total\n            date\n            status\n            items {\n                id\n                quantity\n                limit\n            }\n        }\n    }"]);return Pt=function(){return e},e}function wt(){var e=Object(N.a)(["\n    mutation addProject($input: ProjectInput) {\n      addProject(input: $input){\n            id\n        }\n    }\n"]);return wt=function(){return e},e}function Ct(){var e=Object(N.a)(["\n    query getProject($id: ID) {\n        getProject(id: $id) {\n            id\n            name\n            total\n            date\n            status\n            seller\n            client\n            items {\n                id\n                quantity\n                limit\n            }\n        }\n        getProducts{\n            id\n            name\n            price\n            stock\n        }\n    }"]);return Ct=function(){return e},e}function kt(){var e=Object(N.a)(["\n    query getProjects($client: String, $limit: Int, $offset: Int) {\n        getProjects(client: $client, limit: $limit, offset: $offset){\n            id\n            name\n            total\n            date\n            status\n            items {\n                id\n                quantity\n                limit\n            }\n        }\n        totalProjects(client: $client)\n    }\n"]);return kt=function(){return e},e}var St=j()(kt()),xt=j()(Ct()),$t=j()(wt()),At=j()(Pt()),It=j()(Ot()),Dt=Object(s.g)(function(e){var t=e.products,a=t.products,n=t.total,l=e.idClient,o=e.history,c=e.refetch,s=e.idSeller,m=e.name,u=!a||n<=0;return r.a.createElement(i.c,{mutation:$t,onCompleted:function(){return c().then(function(){o.push("/clientes")})}},function(e){return r.a.createElement("button",{disabled:u,type:"button",className:"btn btn-lg btn-info mt-4",onClick:function(t){var r=a.map(function(e){return e.name,e.price,e.stock,Object(Fe.a)(e,["name","price","stock"])});e({variables:{input:{items:r,total:n,name:m,client:l,seller:s}}})}},"Guardar Proyecto")})}),qt=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={products:[],total:0,name:""},a.handleChange=function(e){a.setState({products:e})},a.handleName=function(e){a.setState(Object(U.a)({},a.state.name,{name:e.target.value}))},a.updateTotal=function(){var e=a.state.products;if(0!==e.length){var t=0;e.map(function(e){return t+=e.quantity*e.price}),a.setState({total:t})}else a.setState({total:0})},a.updateQuantity=function(e,t){var n=a.state.products;n[t].quantity=Number(e),a.setState({products:n},function(){return a.updateTotal()})},a.updateLimit=function(e,t){var n=a.state.products;n[t].limit=Number(e),a.setState({products:n})},a.deleteProduct=function(e){var t=a.state.products.filter(function(t){return t.id!==e});a.setState({products:t},function(){return a.updateTotal()})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=0!==this.state.products.length?r.a.createElement(Dt,{name:this.state.name,idSeller:this.props.idSeller,products:this.state,idClient:this.props.id,refetch:this.props.refetch}):null,t=this.state.total<0?r.a.createElement(Te,{message:"Las cantidades no pueden ser negativas"}):null;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center mb-5"},"Seleccionar Art\xedculos"),t,r.a.createElement($e.a,{closeMenuOnSelect:!1,components:Ie()(),isMulti:!0,options:this.props.products,placeholder:"Seleccionar Productos",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},onChange:this.handleChange,value:this.state.products}),r.a.createElement("input",{requred:!0,type:"text",name:"name",className:"mt-2 form-control",placeholder:"Nombre del proyecto",onChange:this.handleName}),r.a.createElement(jt,{products:this.state.products,updateQuantity:this.updateQuantity,updateLimit:this.updateLimit,deleteProduct:this.deleteProduct}),r.a.createElement("p",{className:"font-weight-bold float-right mt-5"},"Total:",r.a.createElement("span",{className:"font-weight-normal"}," $",this.state.total)),e)}}]),t}(n.Component),Ft=function(e){function t(){return Object(g.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id,t=this.props.session.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center"},"Pedidos"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Nt,{id:e})),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(i.d,{query:Ee,variables:{stock:!0}},function(a){var n=a.loading,l=a.error,o=a.data,c=a.refetch;a.startPolling,a.stopPolling;return n?r.a.createElement(q,null):l?"Error ".concat(l.message):r.a.createElement(qt,{id:e,products:o.getProducts,refetch:c,idSeller:t})}))))}}]),t}(n.Component),Lt=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).limit=10,a.state={pagination:{offset:0,currentPage:1},alert:{show:!1,message:""}},a.previousPage=function(){a.setState({pagination:{offset:a.state.pagination.offset-a.limit,currentPage:a.state.pagination.currentPage-1}})},a.nextPage=function(){a.setState({pagination:{offset:a.state.pagination.offset+a.limit,currentPage:a.state.pagination.currentPage+1}})},a.status=function(e){return"CANCELADO"===e?r.a.createElement("span",{className:"badge badge-pill badge-danger"},e):"PENDIENTE"===e?r.a.createElement("span",{className:"badge badge-pill badge-warning"},e):"COMPLETADO"===e?r.a.createElement("span",{className:"badge badge-pill badge-success"},e):void 0},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.alert,a=t.show,l=t.message,o=a?r.a.createElement(F,{message:l}):null,s=this.props.match.params.id;return r.a.createElement(i.d,{query:St,pollInterval:1e3,variables:{limit:this.limit,offset:this.state.pagination.offset,client:s}},function(t){var a=t.loading,l=t.error,s=t.data;t.startPolling,t.stopPolling;return a?r.a.createElement(q,null):l?"Error ".concat(l.message):r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center"},"Lista de Proyectos del Cliente"),o,r.a.createElement("ul",{className:"list-group mt-4"},s.getProjects.map(function(t){var a=t.id;return r.a.createElement("li",{key:a,className:"list-group-item"},r.a.createElement("div",{className:"row justify-content-between align-items-center"},r.a.createElement("div",{className:"col-md-6 d-flex justify-content-between align-items-center"},t.name,"  ",e.status(t.status)),r.a.createElement("div",{className:"col-md-6 d-flex justify-content-end"},r.a.createElement(i.c,{mutation:It,onCompleted:function(t){e.setState({alert:{show:!0,message:t.deleteProject}},function(){setTimeout(function(){e.setState({alert:{show:!1,message:""}})},3e3)})}},function(e){return r.a.createElement("button",{type:"button",className:"btn btn-danger d-block d-md-inline-block mr-2",onClick:function(){window.confirm("\xbfSeguro que deseas eliminar este proyecto?")&&e({variables:{id:a}})}},"\xd7 Eliminar")}),r.a.createElement(c.b,{to:"/proyecto/editar/".concat(t.id),className:"btn btn-success d-block d-md-inline-block"},"Editar Proyecto"))))})),r.a.createElement(D,{pagination:e.state.pagination,total:s.totalProjects,previousPage:e.previousPage,nextPage:e.nextPage,limit:e.limit}))})}}]),t}(n.Component),Tt=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).limit=r.a.createRef(),a.state={updateLimit:Number(a.props.product.limit-a.props.product.quantity)},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product;return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,"$",t.price),r.a.createElement("td",null,t.stock),r.a.createElement("td",null,r.a.createElement("input",{min:"1",type:"number",className:"form-control",onChange:function(a){Number(a.target.value)>e.limit.current.value&&(a.target.value=e.limit.current.value),e.setState({updateLimit:t.limit-a.target.value}),e.props.updateQuantity(a.target.value,e.props.index)},value:t.quantity})),r.a.createElement("td",null,this.state.updateLimit),r.a.createElement("td",{ref:this.limit},t.limit),r.a.createElement("td",{className:"col-2"},r.a.createElement("button",{type:"button",className:"btn btn-danger font-weight-bold",onClick:function(a){return e.props.deleteProduct(t.id)}},"\xd7 Eliminar"))))}}]),t}(n.Component),Ut=function(e){var t=e.updateQuantity,a=e.updateLimit,l=e.deleteProduct,o=e.products;return 0===o.length?null:r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center my-5"},"Resumen y Cantidades"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"bg-success text-light"},r.a.createElement("tr",{className:"font-weight-bold"},r.a.createElement("th",null,"Producto"),r.a.createElement("th",null,"Precio"),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Cantidad"),r.a.createElement("th",null,"Limite Actual"),r.a.createElement("th",null,"Limite Total"),r.a.createElement("th",null,"Acciones"))),r.a.createElement("tbody",null,o.map(function(e,n){return r.a.createElement(Tt,{key:e.id,id:e.id,product:e,index:n,updateQuantity:t,updateLimit:a,deleteProduct:l})}))))},Rt=Object(s.g)(function(e){var t,a=e.products,n=a.products,l=a.total,o=a.projectName,c=a.status,s=e.idClient,m=e.idProject,u=e.history,d=e.refetch,p=e.idSeller,f=(e.name,e.original),g=!0;return n.forEach(function(e,a){g&&e.id===f[a].id&&e.quantity===f[a].quantity?t=!0:(t=!1,g=!1)}),r.a.createElement(i.c,{mutation:At,onCompleted:function(){return d().then(function(){u.push("/proyectos/".concat(s))})}},function(e){return r.a.createElement("button",{disabled:t,type:"button",className:"btn btn-lg btn-info mt-4",onClick:function(t){var a=[],r=n.map(function(e){return e.name,e.price,e.stock,Object(Fe.a)(e,["name","price","stock"])});r.forEach(function(e,t){e.id===f[t].id&&a.push(e.quantity-f[t].quantity)}),e({variables:{input:{id:m,name:o,client:s,seller:p,items:r,total:l,status:c,rest:a}}})}},"Editar Proyecto")})}),Mt=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={products:[],total:a.props.project.total,projectName:a.props.project.name,status:a.props.project.status},a.compareProducts=function(e,t){var a=[];return t.forEach(function(t){a.push(e.filter(function(e){return e.id===t.id}))}),t.map(function(e){var t=a.flat().find(function(t){return t.id===e.id});return Object(U.a)({},e,t)})},a.handleChange=function(e){a.setState({products:e})},a.handleName=function(e){a.setState(Object(U.a)({},a.state.projectName,{projectName:e.target.value}))},a.handleStatus=function(e){a.setState(Object(U.a)({},a.state.projectName,{status:e.target.value})),console.log(a.state.status)},a.updateTotal=function(){var e=a.state.products;if(0!==e.length){var t=0;e.map(function(e){return t+=e.quantity*e.price}),a.setState({total:t})}else a.setState({total:0})},a.updateQuantity=function(e,t){var n=a.state.products;n[t].quantity=Number(e),a.setState({products:n},function(){return a.updateTotal()})},a.updateLimit=function(e,t){var n=a.state.products;n[t].limit=Number(e),a.setState({products:n})},a.deleteProduct=function(e){var t=a.state.products.filter(function(t){return t.id!==e});a.setState({products:t},function(){return a.updateTotal()})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.setState({products:this.compareProducts(this.props.products,this.props.project.items)})}},{key:"render",value:function(){var e=this.state.products,t=this.props.project.items,a=0!==e.length?r.a.createElement(Rt,{name:this.state.projectName,products:this.state,idSeller:this.props.project.seller,idClient:this.props.project.client,idProject:this.props.project.id,original:t,refetch:this.props.refetch}):null,l=this.state.total<0?r.a.createElement(Te,{message:"Las cantidades no pueden ser negativas"}):null;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement(Nt,{id:this.props.project.client})),r.a.createElement("div",{className:"col-9"},l,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",{htmlFor:"name"},"Nombre del Proyecto:"),r.a.createElement("input",{type:"text",name:"name",id:"name",className:"mt-2 mr-2 form-control",placeholder:"Nombre del proyecto",onChange:this.handleName,value:this.state.projectName})),r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",{htmlFor:"select"},"Estatus:"),r.a.createElement("select",{className:"mt-2 ml-2 form-control",value:this.state.status,id:"select",onChange:this.handleStatus},r.a.createElement("option",{value:"COMPLETADO"},"COMPLETADO"),r.a.createElement("option",{value:"PENDIENTE"},"PENDIENTE"),r.a.createElement("option",{value:"CANCELADO"},"CANCELADO")))),r.a.createElement(Ut,{products:this.state.products,updateQuantity:this.updateQuantity,updateLimit:this.updateLimit,deleteProduct:this.deleteProduct}),r.a.createElement("p",{className:"font-weight-bold float-right mt-5"},"Total:",r.a.createElement("span",{className:"font-weight-normal"}," $",this.state.total)),a)))}}]),t}(n.Component),Vt=Object(s.g)(Mt),Qt=function(e){function t(){return Object(g.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"text-center"},"Editar Proyecto"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(i.d,{query:xt,variables:{id:e}},function(e){var t=e.loading,a=e.error,n=e.data,l=e.refetch;return t?"Loading...":a?"Error ".concat(a.message):r.a.createElement(Vt,{project:n.getProject,products:n.getProducts,refetch:l})}))))}}]),t}(n.Component),Bt=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).limit=10,a.state={pagination:{offset:0,currentPage:1},alert:{show:!1,message:""}},a.previousPage=function(){a.setState({pagination:{offset:a.state.pagination.offset-a.limit,currentPage:a.state.pagination.currentPage-1}})},a.nextPage=function(){a.setState({pagination:{offset:a.state.pagination.offset+a.limit,currentPage:a.state.pagination.currentPage+1}})},a.rol=function(e){return"ADMINISTRADOR"===e?r.a.createElement("span",{className:"badge badge-pill badge-warning"},e):"VENDEDOR"===e?r.a.createElement("span",{className:"badge badge-pill badge-primary"},e):void 0},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.alert,a=t.show,l=t.message,o=a?r.a.createElement(F,{message:l}):null,m="ADMINISTRADOR"!==this.props.session.rol?r.a.createElement(s.a,{to:"/panel"}):null;return r.a.createElement(i.d,{query:rt,pollInterval:1e3,variables:{limit:this.limit,offset:this.state.pagination.offset}},function(t){var a=t.loading,l=t.error,s=t.data;t.startPolling,t.stopPolling;return a?r.a.createElement(q,null):l?"Error ".concat(l.message):r.a.createElement(n.Fragment,null,m,r.a.createElement("h2",{className:"text-center"},"Lista de Usuarios"),o,r.a.createElement("ul",{className:"list-group mt-4 col-8 m-auto"},s.getUsers.map(function(t){var a=t.id;return r.a.createElement("li",{key:a,className:"list-group-item"},r.a.createElement("div",{className:"row justify-content-between align-items-center"},r.a.createElement("div",{className:"col-md-6 d-flex justify-content-between align-items-center"},t.name,"  ",e.rol(t.rol)),r.a.createElement("div",{className:"col-md-6 d-flex justify-content-end"},r.a.createElement(i.c,{mutation:lt,onCompleted:function(t){e.setState({alert:{show:!0,message:t.deleteUser}},function(){setTimeout(function(){e.setState({alert:{show:!1,message:""}})},3e3)})}},function(e){return r.a.createElement("button",{type:"button",className:"btn btn-danger d-block d-md-inline-block mr-2",onClick:function(){window.confirm("\xbfSeguro que deseas eliminar este usuario?")&&e({variables:{id:a}})}},"\xd7 Eliminar")}),r.a.createElement(c.b,{to:"/usuario/editar/".concat(t.id),className:"btn btn-success d-block d-md-inline-block"},"Editar Usuario"))))})),r.a.createElement(D,{pagination:e.state.pagination,total:s.totalUsers,previousPage:e.previousPage,nextPage:e.nextPage,limit:e.limit}))})}}]),t}(n.Component),zt={user:"",password:"",repeatPassword:"",name:"",rol:""},Gt=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user.user,password:"",repeatPassword:"",name:a.props.user.name,rol:a.props.user.rol},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(T.a)({},n,r))},a.validateForm=function(){var e=a.state,t=e.user,n=e.password,r=e.repeatPassword,l=e.name,o=e.rol;return!t||!l||!o||!n||n!==r},a.cleanState=function(){a.setState(Object(U.a)({},zt))},a.createRegistry=function(e,t){e.preventDefault(),t().then(function(e){a.cleanState()}).catch(function(e){console.error(e)})},a}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,l=t.password,o=t.repeatPassword,c=t.name,m=t.rol,u=this.props.user.id,d="ADMINISTRADOR"!==this.props.session?r.a.createElement(s.a,{to:"/panel"}):null,p={user:a,password:l,name:c,rol:m,id:u};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row justify-content-center"},d,r.a.createElement(i.c,{mutation:ot,variables:{input:p},onCompleted:function(){return e.props.refetch().then(function(){e.props.history.push("/usuarios")})}},function(t,n){var s=n.loading,i=n.error;n.data;return r.a.createElement("form",{className:"col-md-8",onSubmit:function(a){return e.createRegistry(a,t)}},i?r.a.createElement(Te,{message:i.message}):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Usuario"),r.a.createElement("input",{type:"text",name:"user",className:"form-control",placeholder:"Nombre Usuario",onChange:e.handleChange,value:a}),r.a.createElement("small",{className:"form-text text-muted"},"(Sin espacios, ni caracteres especiales)")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Nombre Completo",onChange:e.handleChange,value:c}),r.a.createElement("small",{className:"form-text text-muted"},"(Agrega el nombre completo con apellidos)")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",onChange:e.handleChange,value:l})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",null,"Repetir Password"),r.a.createElement("input",{type:"password",name:"repeatPassword",className:"form-control",placeholder:"Repetir Password",onChange:e.handleChange,value:o}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Rol:"),r.a.createElement("select",{name:"rol",className:"form-control",value:m,onChange:e.handleChange},r.a.createElement("option",{defaultValue:!0},"Elegir:"),r.a.createElement("option",{value:"ADMINISTRADOR"},"Administrador"),r.a.createElement("option",{value:"VENDEDOR"},"Vendedor"))),r.a.createElement("button",{disabled:s||e.validateForm(),type:"submit",className:"btn btn-success float-right"},"Editar Usuario"))})))}}]),t}(n.Component),Jt=Object(s.g)(Gt),Kt=function(e){function t(){return Object(g.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.id;return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center"},"Editar Usuario"),r.a.createElement("div",null,r.a.createElement(i.d,{query:nt,variables:{id:t}},function(a){var n=a.loading,l=a.error,o=a.data,c=a.refetch;return n?"Loading...":l?"Error ".concat(l.message):r.a.createElement(Jt,{id:t,user:o.getSingleUser,refetch:c,session:e.props.session.rol})})))}}]),t}(n.Component),Wt=Et(function(e){var t=e.refetch,a=e.session,l=a.getUser;return r.a.createElement(c.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(f,{session:a}),r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"text-right"},l?"Bienvenido: ".concat(l.name):null),r.a.createElement(s.d,null,r.a.createElement(vt,{exact:!0,path:"/clientes",component:L,session:l}),r.a.createElement(vt,{exact:!0,path:"/cliente/nuevo",component:R,session:l}),r.a.createElement(vt,{exact:!0,path:"/cliente/editar/:id",component:Q}),r.a.createElement(vt,{exact:!0,path:"/proveedores",component:Z,session:l}),r.a.createElement(vt,{exact:!0,path:"/proveedor/nuevo",component:ee,session:l}),r.a.createElement(vt,{exact:!0,path:"/proveedor/editar/:id",component:ne}),r.a.createElement(vt,{exact:!0,path:"/producto/nuevo",component:Pe}),r.a.createElement(vt,{exact:!0,path:"/productos",component:we}),r.a.createElement(vt,{exact:!0,path:"/producto/editar/:id",component:xe}),r.a.createElement(vt,{exact:!0,path:"/pedido/nuevo/:id",component:Me,session:l}),r.a.createElement(vt,{exact:!0,path:"/pedidos/:id",component:je}),r.a.createElement(vt,{exact:!0,path:"/proyecto/nuevo/:id",component:Ft,session:l}),r.a.createElement(vt,{exact:!0,path:"/proyectos/:id",component:Lt}),r.a.createElement(vt,{exact:!0,path:"/proyecto/editar/:id",component:Qt}),r.a.createElement(vt,{exact:!0,path:"/panel",component:Je}),r.a.createElement(vt,{exact:!0,path:"/registro",component:it,session:l}),r.a.createElement(vt,{exact:!0,path:"/usuarios",component:Bt,session:l}),r.a.createElement(vt,{exact:!0,path:"/usuario/editar/:id",component:Kt,session:l}),r.a.createElement(s.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(gt,{refetch:t,session:l})}}),r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(gt,{refetch:t,session:l})}}),r.a.createElement(s.b,{render:function(){return r.a.createElement(Te,{message:"La ruta a la que intentas acceder no existe"})}})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Xt=a(192),Yt=a(66),_t=new Xt.a({uri:"/graphql",fetchOptions:{credentials:"include"},request:function(e){var t=sessionStorage.getItem("token");e.setContext({headers:{authorization:t}})},cache:new Yt.a({addTypename:!1}),onError:function(e){var t=e.networkError,a=e.graphQLErrors;console.log("graphQLErrors",a),console.log("networkError",t)}});o.a.render(r.a.createElement(i.b,{client:_t},r.a.createElement(Wt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[222,1,2]]]);
//# sourceMappingURL=main.16792b6d.chunk.js.map